@using UCommerce.Api
@using UCommerce.EntitiesV2
@using UCommerce.Runtime
@{
    PurchaseOrder basket = null;
    if(TransactionLibrary.HasBasket())
    {
        basket = TransactionLibrary.GetBasket(false).PurchaseOrder;
    }
}

    @if(basket == null || !basket.OrderLines.Any())
    {
        <a href="/shop">Your Shopping Cart is empty</a>
    }
    else
    {
        <a href="/shop/checkout/cart.aspx" id="mini-cart"><i class="icon-shopping-cart icon-white"></i><span class="item-qty">@basket.OrderLines.Sum(x => x.Quantity).ToString("#,##")</span> items in cart, total: <span class="order-total">@SiteContext.Current.CatalogContext.CurrentCatalog.PriceGroup.Currency.Name@basket.OrderTotal.Value.ToString("#,##0.00")</span></a>
    }
